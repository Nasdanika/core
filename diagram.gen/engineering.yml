engineering-module:
  name: Generators
  path: gen
  dependencies:
    - engineering://nasdanika/modules/core/modules/diagram/modules/model
    - engineering://nasdanika/modules/core/modules/mxgraph
    - engineering://nasdanika/modules/core/modules/exec/modules/model
  issues:
    plant-uml-layout:
      name: Use PlantUML to layout
      description: |+2
        Generate PlantUML diagram, parse image map and use to position and size diagram element rectangles, if parsing is successful.
        After that apply sizes from styles and if there were sizes from styles and they were larger than PlantUML sizes then layout so there is no overlap.
        Use the existing algorithm to move overlapping resized rectangle from the center of union of all rectangles. Pass initial delta between the center points of the union
        rectangle and the rectangle to be positioned to the generator factory - it will define initial radius and angle. An advanced implementation may be some kind of of a force
        algorithm where positioning iteration goes over an increase from the force equilibrium - offset generator may compute a certain amount of positions (e.g. 1000 or 10000), compute 
        force for each point, sort them and then return in the order of increasing energy - difference from the equilibrium where the force is zero.     
        For border rectangles such as entry/exit points - reposition proportionally to keep them on the border.
      effort: 4     
    drawio-diagram-processing:
      name: Processing of Drawio diagrams
      description: |+2
        For existing diagrams - loading, building a graph, passing it to a method which returns a graph - the same or a different.
        If returned graph is not null then its model gets encoded. Optionally replace the original file with the processed one if file URI.
        Default implementation iterates over all cells and passes them to a cell processing/filtering method. 
        The cell processing method shall return boolean to indicate that the cell was changed.
        The graph processing method shall return the same graph if any of the cells were modified or null.        
        URI processing - if a cell has uri attribute - resolve, set relative links. If there is style - merge. 
        Element style overrides uri style entries. Size - boolean property to indicate that cell shall be resized if element at the URI specifies size.
        This approach would allow to create manual diagrams referencing existing model elements and have a consistent appearance of diagram elements across
        multiple diagrams. Also element look will be automatically updated on all diagrams if it changes.
        Sync boolean property in diagram elements and diagrams - if true the diagram (representation) and the element shall be updated when the backing model
        changes, e.g. label, or deleted if the element is not present in the model anymore. True by default, can be set to false by the modeler in the model (YAML)
        or in Drawio editor. URI is used for correlation. Perhaps sync may be a list of what should be synced with true meaning all, false nothing and a comma-separated list
        for fine-grained definitions. For example, it might be needed to update style if it was generated from the model and the model definition changed.
        One option of deling with style is to compute style digest during generation and store as a property. Update style only if the style was not changed since last generation,
        i.e. computed digest is the same as stored digest. In this case sync style would have some value e.g. sync=style=unmodified;label=true - i.e. sync style only if it was not changed manually
        and always update label. May use the same approach for label - label-digest (or hash) property. Users can force update of style or label by removing/clearing respective -hash property.  
        One more aspect of processing is validation. E.g. validation of links, especially relative links.
      effort: 8 
    styling-of-mxcells:
      name: Implement styling of mxcells
      description: |+2
        DrawioGenerator - for diagram elements and connections. Translation of style types to shapes, e.g. node to cube. Shapes for start and end.
        A library of styles - from the drawio palette, exensible. Protected method in the generator, perhaps a service so multiple jars can contribute.
        Create a feature with documentation how to use. Or maybe Drawio support feature and document there, or a hierarchy of features.
      effort: 4
    support-mermaid-js:
      name: Add support of Mermaid-js
      description: |+2
        https://mermaid-js.github.io/mermaid/#/, 
        Specifically add support of user journey diagram to use in flows - https://mermaid-js.github.io/mermaid/#/user-journey.
        Sentiment value and participants from properties or element description.
      effort: 4 
    drawio-multi-page:
      name: Support of multi-page diagrams
      description: |+2
        Low level: Encoding methods which take a colleciton of diagrams, single diagram methods delegate to them.
        High level (flow and state diagrams) - a flag specifying that a diagram element with child elements which is not a partition shall be generated as 
        another page rather than navigating to that element's HTML page. Maybe refactor partition attribute to some kind of enum attribute with partition and page as possible values.
        For PlantUML use table by default, as it is now, but with an anchor for cross-referencing. Protected method to override to use, say, bootstrap tabs, instead of tables.              
      effort: 4 
    drawio-customize-editor-url:
      name: Customize drawio editor URL
      description: Ability to send to edit to a site other than diagrams.net
      effort: 4
    connection-ids:
      name: Connection ID's
      description: Own GUID or as source ID and connection role/key e.g. xxxx-outputs-xyz
    word-wrapping:
      name: Word wrapping
      description: If there are new lines - replace with space, set word wrapping to true, count lines and adjust width and heights according to the longes line and the number of lines.
    gantt-representation:
      name: Gantt representation
      description: With support of events and relative durations. Transition durations.
